{% extends 'base.html' %} {% block scripts %}
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
{% comment %} Edit Profile {% endcomment %}
<div
        class="modal fade"
        id="profileModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
          <h1 class="city_title">Edit Profile</h1>
        </h5>
        <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="profilePageContainer">
          <div class="card mb-3" id="postCard" style="max-width: 540px">
            <form method="POST" action="{% url 'profile_edit' user.id %}">
              {% csrf_token %} {{ edit_form.as_p }}
              <div class="modal-footer" style="justify-content: center;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  Cancel
                </button>
                <button type="submit" class="btn btn-primary" value="Submit">Submit</button>
                <input type="hidden" name="next" value="{{ next }}" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Post Modal -->
<div
        class="modal fade"
        id="postModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
          <h1 class="city_title">Create a New Post</h1>
        </h5>
        <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="profilePageContainer">
          <div class="card mb-3" id="postCard" style="max-width: 540px">
            <form action="{% url 'profile' %}" method="POST">
              <div class="titleDiv form-group">
              </div>
              {% csrf_token %}
              {{ post_form.as_p }}
              <div class="modal-footer" style="justify-content: center;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  Cancel
                </button>
                <button type="submit" class="btn btn-primary" value="Submit">Submit</button>
                <input type="hidden" name="next" value="{{ next }}" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% comment %} end of modal body {% endcomment %}













{% comment %} 
<div
        class="modal fade"
        id="DeletePostModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
          <h1 class="city_title">Delete Alert</h1>
        </h5>
        <button
                type="button"
                class="btn-close"
                data-bs-dismiss="deleteModal"
                aria-label="Close"
        ></button>
      </div>
      {% comment %} modal {% endcomment %}
      <div class="modal-body">
        <h3>Are you sure you want to delete</h3>
        {% comment %} <form action="{% url 'post_delete' post.id%}">
          <input class="btn btn-primary" type="submit" value="Delete post" />
        </form> {% endcomment %}
      </div>
    </div>
  </div>
</div>
</div>
</div>
{% comment %} Post Select Model {% endcomment %}
<!-- Post Select Modal -->













<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
<div class="postCard">
  <div class="card" style="max-width: 840px; min-width: 840px;">
    <div class="card-header">
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="float: right"></button>
      <h5 class="card-title postHeader">Title: {{ post.title }}</h5>
      <p class="text-muted postHeader">Posted on: {{ post.created_at }}</p>
    </div>
    <div class="card-body">
      <p>Author: {{ post.user.username }}</p>
      <p class="card-text">{{ post.description }}</p>
      <div class="row">
        <div class="col-4 postCol">
          <a
                  href="{% url 'all_posts' %}"
                  class="btn btn-primary"
                  style="float: right"
          > <i class="fa fa-user-circle" aria-hidden="true"></i> Go To All Post
          </a>
        </div>
        <div class="col-4 postCol">
          <button
                  type="button"
                  class="btn btn-primary"
                  id="add-btn"
                  data-bs-toggle="deleteModal"
                  data-bs-target="#DeletePostModal"
          >
            <i class="fas fa-trash-alt"></i> Delete</i>
          </button>
        </div>
        <div class="col-4 postCol">
          <button
                  type="button"
                  class="btn btn-primary"
                  id="add-btn"
                  data-bs-toggle="modal"
                  data-bs-target="#postModal"
          >
            <i class="fas fa-edit"></i> Edit Post</i>
          </button>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>
    </div>
</div>
 {% endcomment %}




















            {% comment %} start of app body {% endcomment %}
            {% block modalMainPage %} {% endblock %} {% endblock %} {% block content %}
            <div class="profilePageContainer">
              <div class="row">
                {% comment %} List item Column {% endcomment %}
                <div class="col-4 cityListRow">
                  <!-- Button trigger modal for Add A City-->
                  <h2 class="city_title_dark" style="    margin-bottom: 0px;
    line-height: 1.75;">&nbsp;&nbsp; Your Cities <button style="justify-content: end; float: right;
    margin: 3%;" type="button" class="btn btn-primary city-btn" data-bs-toggle="modal" data-bs-target="#addNewCity">
                    Add A City
                  </button></h2>
                  {% comment %} Add new City button {% endcomment %}
                  <!-- Modal -->
                  <div class="modal fade" id="addNewCity" tabindex="-1">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">Add A City</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="Modal"></button>
                        </div>
                        <div class="modal-body">
                          <form action="{% url 'city_index' %}" method="POST">
                            <div class="titleDiv form-group"></div>
                            {% csrf_token %} {{ city_form.as_p }}
                            <div class="modal-footer" style="justify-content: center">
                              <button type="button"class="btn btn-secondary" data-bs-dismiss="modal">
                                Cancel
                              </button>
                              <button type="submit" class="btn btn-primary" value="Submit">
                                Submit
                              </button>
                              <input type="hidden" name="next" value="{{ next }}" />
                            </div>
                          </form>
                        </div>

                      </div>
                    </div>
                  </div>

                  {% comment %} Cities content + posts {% endcomment %}
                  <section class="overflow-auto cityScroll">
                    {% for city in cities %}
                    {% comment %} {% if forloop.counter|divisibleby:2 %} {% endcomment %}
                    {% comment %} <div class="card mb-3" style="max-width: 540px">
                    <a class="list-group-item list-group-item-action" href="{% url 'city_detail' city.id %}">
                      <div class="row g-0">
                        <div class="col-md-4">
                          <img class="cityListImage" src="{{city.flags}}" alt="..." />
                        </div>
                        <div class="col-md-8">
                          <div class="card-body">
                            <h5 class="card-title">{{ city.name }}</h5>
                            <p class="card-text">{{ city.description }}</p>
                            <p class="card-text">
                              <small class="text-muted">Last updated 3 mins ago</small>
                            </p>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div> {% endcomment %}
                    {% comment %} {% else %} {% endcomment %}
                    <div class="card mb-3 profile-city-list leftSideHover">
                      <a class="list-group-item list-group-item-action leftSideHover2" href="{% url 'profile_show' profile.id city.id  %}">
                        <div class="row g-0">
                          <div class="col-md-8">
                            <div class="card-body">
                              <h2 class="card-title">{{city.name}}</h2>
                              </p>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <img class="cityListImage" src="{{city.flags}}" alt="..." />
                          </div>
                        </div>
                      </a>
                    </div>
                    {% comment %} {% endif %}  {% endcomment %}
                    {% endfor %} {% comment %} end col {% endcomment %}
                  </section>
                </div>

                {% comment %} Selected city Column {% endcomment %}
                <div
                        class="col-8 scrollspy-example"
                        data-bs-spy="scroll"
                        data-bs-target="#list-example"
                        data-bs-offset="0"
                        tabindex="0"
                >
                  <div class="selected_city">
                    <div class="row profileBox">
                      {% comment %} added id = listitem eventuallythat will allow to open
                      seperate city {% endcomment %}
                      <div class="col-6" id="list-item-1">
                          <div class="cityname">
                            {% if profile.city.name|length <= 0 %}
                            <h1> Tell Us Your Favorite City! </h1>
                            {% else %}
                        <a class ="mainPageATag" href="{% url 'city_detail' profile.city %}">
                            <h1> {{profile.city.name}}</h1>
                            <h3>{{profile.city.description}}</h3>
                            {% endif %}
                          </div>
                        </a>
                      </div>
                      <div class="col-6">
                        <div class="user_information">
                          {% comment %} userinformation {% endcomment %}
                          <div class="user">

                            <p class="username">{{profile.username}}</p>
                            {% comment %} <a href="{% url 'profile_detail' user.id %}"> {% endcomment %}
                            <button  type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#profileModal">
                              Edit Profile
                              <i class="fas fa-user-cog"></i>
                            </button>
                            {% comment %} </a> {% endcomment %}
                            <p class="userlogin text-muted">
                              Joined: {{user.date_joined.month}}, {{user.date_joined.year}}
                            </p>
                          </div>
                        </div>
                        <div class="cityimg">

                          {% if profile.city.flags|length <= 0 %}
                          <img
                                  class="cardCityImage"
                                  src="https://i.imgur.com/Lu90xpf.gif"
                                  alt=""
                          />
                          {% else %}
                          <img
                                  class="cardCityImage"
                                  src="{{ profile.city.flags }}"
                                  alt=""
                          />
                          {% endif %}
                        </div>
                      </div>
                    </div>
                    <div class="row profilePost">
                      <div class="col-6 yourPostTitle">
                        <h1 class="whiteTitle">Your Posts</h1>
                      </div>
                      <div class="col-6">
                        {% comment %} button {% endcomment %}
                        <button type="button" class="btn btn-primary addPostButton" id="add-btn" data-bs-toggle="modal" data-bs-target="#postModal">
                          <i class="fas fa-plus"></i>
                          Add A Post
                        </button>
                      </div>
                    </div>
                    <div class="posts overflow-auto postBox" id="posts">
                      <div></div>
                      {% comment %} {% if profile.post.city.id==city.id %} {% endcomment %}
                      {% for post in posts %}

                      <a class="cardATag" href="{% url 'posts_detail' post.id %}">
                        {% if forloop.counter|divisibleby:2 %}
                        <div class="card mb-3 postsContainer" data-bs-toggle="modal" data-bs-target="#postSelectModal">
                          <div class="row g-0">
                            <div class="col-md-4">
                              <img
                                      class="cardPostImage"
                                      src="{{profile.avatar}}"
                                      alt="https://static.independent.co.uk/2020/10/31/17/connery-head.jpg"
                              />
                            </div>
                            <div class="col-md-8">
                              <div class="card-body">
                                <h5 class="card-title">{{post.title}}</h5>
                                <p class="card-text">
                                  {{post.description}}
                                </p>
                                <p class="card-text">
                                  <small class="text-muted rightPostProfile"
                                  >Created at {{post.created_at}}</small
                                  >
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                        {% else %}
                        <div class="card mb-3" style="margin-top:1%" data-bs-toggle="modal" data-bs-target="#postSelectModal">
                          <div class="row g-0">
                            <div class="col-md-8">
                              <div class="card-body">
                                <h5 class="card-title">{{post.title}}</h5>
                                <p class="card-text">
                                  {{post.description}}
                                </p>
                                <p class="card-text">
                                  <small class="text-muted leftPostProfile">Created at {{post.created_at}}</small>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <img
                                      class="cardPostImage"
                                      src="{{profile.avatar}}"
                                      alt="https://ca.slack-edge.com/T0351JZQ0-U01DGR9PCU8-d7d02626fb4c-512"
                                      style="float: right"
                              />
                            </div>
                          </div>
                        </div>
                        {% endif %}
                      </a>

                      {% endfor %}
                      {% comment %} {% endif %} {% endcomment %}
                    </div>
                  </div>
                </div>
                </a>
                {% comment %} end col {% endcomment %}
              </div>
            </div>
            {% endblock %}
