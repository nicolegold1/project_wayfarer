{% extends 'base.html' %} {% block scripts %}
<link
  rel="stylesheet"
  href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
  integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
  crossorigin="anonymous"
/>
{% endblock %} {% block modalMainPage %} {% comment %} Edit Profile {%
endcomment %}
<div
  class="modal fade"
  id="profileModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title city_title" id="exampleModalLabel">
          Edit Profile
        </h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="profilePageContainer">
          <div class="card mb-3" id="postCard" style="max-width: 540px">
            <form method="POST" action="{% url 'profile_edit' user.id %}">
              {% csrf_token %} {{ edit_form.as_p }}
              <div class="modal-footer" style="justify-content: center">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <button type="submit" class="btn btn-primary" value="Submit">
                  Submit
                </button>
                <input type="hidden" name="next" value="{{ next }}" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Post Modal -->
<div
  class="modal fade"
  id="postModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title city_title" id="exampleModalLabel">
          Create a New Post
        </h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="profilePageContainer">
          <div class="card mb-3" id="postCard" style="max-width: 540px">
            <form action="{% url 'profile' %}" method="POST">
              <div class="titleDiv form-group"></div>
              {% csrf_token %} {{ post_form.as_p }}
              <div class="modal-footer" style="justify-content: center">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <button type="submit" class="btn btn-primary" value="Submit">
                  Submit
                </button>
                <input type="hidden" name="next" value="{{ next }}" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% comment %} end of modal body {% endcomment %} {% comment %} Post Select Model
{% endcomment %}
<!-- Post Select Modal -->
{% comment %}
<div
  class="modal fade"
  id="postSelectModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  {% endcomment %} {% comment %}
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title city_title" id="exampleModalLabel">
          Selected Post
        </h1>

        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="profilePageContainer">
          <div class="postCard">
            <div class="card" style="max-width: 840px; min-width: 840px">
              <div class="card-header">
                <h5 class="card-title postHeader">Title: {{ post.title }}</h5>
                <p class="text-muted postHeader">
                  Posted on: {{ post.created_at }}
                </p>
              </div>
              <div class="card-body">
                <p>Author: {{ post.user.username }}</p>
                <p class="card-text">{{ post.description }}</p>

                <div class="row">
                  {% comment %}
                  <div class="modal-footer">
                    {% endcomment %} {% comment %}
                    <div class="col-4 postCol">
                      <a
                        href="{% url 'all_posts' %}"
                        class="btn btn-primary"
                        style="float: right"
                      >
                        <i class="fa fa-user-circle" aria-hidden="true"></i> Go
                        To All Post
                      </a>
                    </div>
                    <div class="col-4 postCol">
                      <button
                        type="button"
                        class="btn btn-primary"
                        id="add-btn"
                        data-bs-toggle="modal"
                        data-bs-target="#DeleteModal"
                      >
                        <i class="fas fa-trash-alt"> Delete</i>
                      </button>
                    </div>
                    <div class="col-4 postCol">
                      <button
                        type="button"
                        class="btn btn-primary"
                        id="add-btn"
                        data-bs-toggle="modal"
                        data-bs-target="#postModal"
                      >
                        <i class="fas fa-edit"> Edit Post</i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endcomment %} {% comment %} start of app body {% endcomment %}
            <p></p>
            {% endblock %}
            <p></p>
            {% block content %}
            <div class="profilePageContainer">
              <div class="row">
                {% comment %} List item Column {% endcomment %}
                <div class="col-4 cityListRow">
                  <!-- Button trigger modal for Add A City-->
                  <h1 class="city_title_dark">
                    Cities
                    <button
                      style="justify-content: end; float: right; margin: 3%"
                      type="button"
                      class="btn btn-primary city-btn"
                      data-bs-toggle="modal"
                      data-bs-target="#addNewCity"
                    >
                      Add A City
                    </button>
                  </h1>
                  {% comment %} Add new City button {% endcomment %}
                  <!-- Modal -->
                  <div class="modal fade" id="addNewCity" tabindex="-1">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">
                            Add A City
                          </h5>
                          <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                          ></button>
                        </div>
                        <div class="modal-body">
                          <form action="{% url 'city_index' %}" method="POST">
                            <div class="titleDiv form-group"></div>
                            {% csrf_token %} {{ city_form.as_p }}
                            <div
                              class="modal-footer"
                              style="justify-content: center"
                            >
                              <button
                                class="btn btn-secondary"
                                data-bs-dismiss="modal"
                                type="button"
                              >
                                Cancel
                              </button>
                              <button
                                type="submit"
                                class="btn btn-primary"
                                value="Submit"
                              >
                                Submit
                              </button>
                              <input
                                type="hidden"
                                name="next"
                                value="{{ next }}"
                              />
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>

                  {% comment %} Cities content + posts {% endcomment %}
                  <section class="overflow-auto cityScroll">
                    {% for city in cities %} {% comment %} {% if
                    forloop.counter|divisibleby:2 %} {% endcomment %}
                    <p></p>
                    {% comment %}
                    <div class="card mb-3" style="max-width: 540px">
                      <a
                        class="list-group-item list-group-item-action"
                        href="{% url 'city_detail' city.id %}"
                      >
                        <div class="row g-0">
                          <div class="col-md-4">
                            <img
                              class="cityListImage"
                              src="{{city.flags}}"
                              alt="..."
                            />
                          </div>
                          <div class="col-md-8">
                            <div class="card-body">
                              <h5 class="card-title">{{ city.name }}</h5>
                              <p class="card-text">{{ city.description }}</p>
                              <p class="card-text">
                                <small class="text-muted"
                                  >Last updated 3 mins ago</small
                                >
                              </p>
                            </div>
                          </div>
                        </div>
                      </a>
                    </div>
                    {% endcomment %} {% comment %} {% else %} {% endcomment %}
                    <div
                      class="card mb-3 profile-city-list"
                      style="max-width: 540px"
                    >
                      <a
                        class="list-group-item list-group-item-action"
                        href="{% url 'profile_show' profile.id city.id %}"
                      >
                        <div class="row g-0">
                          <div class="col-md-8">
                            <div class="card-body">
                              <h2 class="card-title">{{city.name}}</h2>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <img
                              class="cityListImage"
                              src="{{city.flags}}"
                              alt="..."
                            />
                          </div>
                        </div>
                      </a>
                    </div>
                    {% comment %} {% endif %} {% endcomment %} {% endfor %}
                  </section>
                  {% comment %} end col {% endcomment %}
                </div>

                {% comment %} Selected city Column {% endcomment %}
                <div
                  class="col-8 scrollspy-example"
                  data-bs-spy="scroll"
                  data-bs-target="#list-example"
                  data-bs-offset="0"
                  tabindex="0"
                >
                  <div class="selected_city">
                    <div class="row">
                      {% comment %} added id = listitem eventuallythat will
                      allow to open seperate city {% endcomment %}
                      <div class="col-6" id="list-item-1">
                        <div class="cityname">
                          {% if profile.city.name|length <= 0 %}
                          <h1>Tell Us Your Favorite City!</h1>
                          {% else %}
                          <h1>{{profile.city}}</h1>
                          {% endif %}
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="user_information">
                          {% comment %} userinformation {% endcomment %}
                          <div class="user">
                            <p class="username">{{profile.username}}</p>
                            {% comment %}
                            <a href="{% url 'profile_detail' user.id %}">
                              {% endcomment %}
                              <button
                                type="button"
                                class="btn btn-primary"
                                data-bs-toggle="modal"
                                data-bs-target="#profileModal"
                              >
                                Edit Profile
                                <i class="fas fa-user-cog"></i>
                              </button>
                              {% comment %}
                            </a>
                            {% endcomment %}
                            <p class="userlogin text-muted">
                              Joined: {{user.date_joined.month}},
                              {{user.date_joined.year}}
                            </p>
                          </div>
                        </div>
                        <div class="cityimg">
                          {% if profile.city.flags|length <= 0 %}
                          <img
                            class="cardCityImage"
                            src="https://i.imgur.com/Lu90xpf.gif"
                            alt=""
                          />
                          {% else %}
                          <img
                            class="cardCityImage"
                            src="{{ profile.city.flags }}"
                            alt=""
                          />
                          {% endif %}
                        </div>
                      </div>
                    </div>
                    <div class="row profilePost">
                      <div class="col-6">
                        <h1>Posts</h1>
                      </div>
                      <div class="col-6">
                        {% comment %} button {% endcomment %}
                        <button
                          type="button"
                          class="btn btn-primary"
                          id="add-btn"
                          data-bs-toggle="modal"
                          data-bs-target="#postModal"
                        >
                          <i class="fas fa-plus"></i>
                          Add A Post
                        </button>
                      </div>
                    </div>
                    <div class="posts overflow-auto" id="posts">
                      <div></div>
                      {% for post in posts %}

                      <a
                        class="cardATag"
                        href="{% url 'posts_detail' post.id %}"
                      >
                        {% if forloop.counter|divisibleby:2 %}
                        <div
                          class="card mb-3 postsContainer"
                          data-bs-toggle="modal"
                          data-bs-target="#postSelectModal"
                        >
                          <div class="row g-0">
                            <div class="col-md-4">
                              <img
                                class="cardPostImage"
                                src="{{profile.avatar}}"
                                alt="https://static.independent.co.uk/2020/10/31/17/connery-head.jpg"
                              />
                            </div>
                            <div class="col-md-8">
                              <div class="card-body">
                                <h5 class="card-title">{{post.title}}</h5>
                                <p class="card-text">{{post.description}}</p>
                                <p class="card-text">
                                  <small class="text-muted rightPostProfile"
                                    >Created at {{post.created_at}}</small
                                  >
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                        {% else %}
                        <div
                          class="card mb-3"
                          style="margin-top: 1%"
                          data-bs-toggle="modal"
                          data-bs-target="#postSelectModal"
                        >
                          <div class="row g-0">
                            <div class="col-md-8">
                              <div class="card-body">
                                <h5 class="card-title">{{post.title}}</h5>
                                <p class="card-text">{{post.description}}</p>
                                <p class="card-text">
                                  <small class="text-muted leftPostProfile"
                                    >Created at {{post.created_at}}</small
                                  >
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <img
                                class="cardPostImage"
                                src="{{profile.avatar}}"
                                alt="https://ca.slack-edge.com/T0351JZQ0-U01DGR9PCU8-d7d02626fb4c-512"
                                style="float: right"
                              />
                            </div>
                          </div>
                        </div>
                        {% endif %}
                      </a>
                      {% endfor %}
                    </div>
                  </div>
                </div>

                {% comment %} end col {% endcomment %}
              </div>
            </div>
          </div>
        </div>
        {% endblock %}
      </div>
    </div>
  </div>
</div>
